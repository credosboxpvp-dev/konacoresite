<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Clone | Gamer Hub</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    
    <style>
        /* DISCORD RENK PALETÄ° */
        :root {
            --bg-dark: #1e1f22;
            --bg-sidebar: #2b2d31;
            --bg-chat: #313338;
            --bg-input: #383a40;
            --text-main: #dbdee1;
            --text-muted: #949ba4;
            --discord-blurple: #5865f2;
            --discord-green: #23a559;
            --discord-red: #f23f42;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'gg sans', 'Helvetica Neue', Arial, sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }

        /* GÄ°RÄ°Åž EKRANI */
        #login-screen {
            position: fixed; inset: 0; background: #313338;
            display: flex; align-items: center; justify-content: center; z-index: 10000;
        }
        .login-card {
            background: #2b2d31; padding: 32px; border-radius: 8px; width: 480px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2); text-align: center;
        }
        .login-card h2 { margin-bottom: 8px; font-size: 24px; }
        .login-card p { color: var(--text-muted); margin-bottom: 20px; font-size: 16px; }
        .login-card input {
            width: 100%; padding: 10px; background: #1e1f22; border: none; 
            color: white; border-radius: 3px; margin-bottom: 8px; font-size: 16px;
        }
        .char-count { font-size: 12px; display: block; margin-bottom: 20px; text-align: left; }
        .login-card button {
            width: 100%; padding: 12px; background: var(--discord-blurple);
            color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: bold;
        }
        .login-card button:disabled { opacity: 0.5; cursor: not-allowed; }

        /* ANA YAPI */
        #app { display: none; width: 100%; height: 100%; }

        /* 1. SUNUCU SÃœTUNU (En Sol) */
        .guilds { width: 72px; background: #1e1f22; display: flex; flex-direction: column; align-items: center; padding-top: 12px; gap: 8px; }
        .guild-icon { width: 48px; height: 48px; background: #313338; border-radius: 50%; display: flex; 
                      align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .guild-icon:hover { border-radius: 15px; background: var(--discord-blurple); }
        .guild-icon.active { border-radius: 15px; background: var(--discord-blurple); }

        /* 2. KANAL SÃœTUNU */
        .sidebar { width: 240px; background: var(--bg-sidebar); display: flex; flex-direction: column; }
        .server-name { height: 48px; display: flex; align-items: center; padding: 0 16px; font-weight: bold; 
                       border-bottom: 1px solid #1e1f22; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .channels { padding: 12px 8px; flex-grow: 1; }
        .channel-item { padding: 6px 8px; border-radius: 4px; color: var(--text-muted); cursor: pointer; margin-bottom: 2px; }
        .channel-item:hover { background: #35373c; color: var(--text-main); }
        .channel-item.active { background: #3f4147; color: white; }

        /* 3. CHAT ALANI */
        .chat-area { flex-grow: 1; background: var(--bg-chat); display: flex; flex-direction: column; position: relative; }
        .chat-header { height: 48px; display: flex; align-items: center; padding: 0 16px; font-weight: bold; border-bottom: 1px solid #1e1f22; gap: 10px;}
        .messages { flex-grow: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; }
        
        .message { display: flex; gap: 16px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.02); }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: #5865f2; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-weight: bold;}
        .msg-content { flex-grow: 1; }
        .msg-user { color: white; font-weight: 500; font-size: 16px; margin-right: 8px; }
        .msg-user.admin { color: #f1c40f; }
        .msg-time { color: var(--text-muted); font-size: 12px; }
        .msg-text { color: var(--text-main); margin-top: 4px; }

        /* 4. ÃœYE LÄ°STESÄ° */
        .member-list { width: 240px; background: var(--bg-sidebar); padding: 12px; }
        .member-list h3 { font-size: 12px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 10px; }

        /* INPUT */
        .input-wrapper { padding: 0 16px 24px 16px; }
        .input-box { background: var(--bg-input); padding: 10px 16px; border-radius: 8px; display: flex; align-items: center; }
        .input-box input { background: transparent; border: none; color: white; flex-grow: 1; outline: none; font-size: 16px; }

        .btn-clear { background: var(--discord-red); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; display: none; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h2>HoÅŸ Geldin!</h2>
            <p>Seni gÃ¶rdÃ¼ÄŸÃ¼mÃ¼ze sevindik!</p>
            <input type="text" id="nickInp" placeholder="KullanÄ±cÄ± adÄ± (Min 16 Karakter)" oninput="validate()">
            <span id="charCount" class="char-count" style="color: var(--discord-red);">Kalan: 16</span>
            <button id="joinBtn" onclick="enterApp()" disabled>GiriÅŸ Yap</button>
        </div>
    </div>

    <div id="app">
        <div class="guilds">
            <div class="guild-icon active"><b>G</b></div>
            <div class="guild-icon">+</div>
        </div>

        <div class="sidebar">
            <div class="server-name">Gamer Hub Sunucusu</div>
            <div class="channels">
                <div class="channel-item active"># genel-sohbet</div>
                <div class="channel-item"># duyurular</div>
                <div class="channel-item" onclick="alert('IÅŸÄ±nlanÄ±lÄ±yor...')">ðŸ”Š Sesli Oda</div>
            </div>
        </div>

        <div class="chat-area">
            <div class="chat-header">
                <span style="color: var(--text-muted); font-size: 24px;">#</span> genel-sohbet
                <button id="adminClear" class="btn-clear" onclick="clearChat()">Chati Temizle</button>
            </div>
            <div class="messages" id="msgFlow"></div>
            <div class="input-wrapper">
                <div class="input-box">
                    <input type="text" id="chatInp" placeholder="#genel-sohbet kanalÄ±na mesaj gÃ¶nder">
                </div>
            </div>
        </div>

        <div class="member-list">
            <h3>Ã‡evrimiÃ§i â€” 1</h3>
            <div id="selfName" style="color: var(--discord-green);"></div>
        </div>
    </div>

    <script>
        let myNick = "";
        let isAdm = false;

        const firebaseConfig = {
            apiKey: "SENIN_API_KEY",
            authDomain: "SENIN_PROJE.firebaseapp.com",
            databaseURL: "https://SENIN_PROJE-default-rtdb.firebaseio.com",
            projectId: "SENIN_PROJE",
            storageBucket: "SENIN_PROJE.appspot.com",
            messagingSenderId: "SAYILAR",
            appId: "APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const chatRef = db.ref('discord_clone_chat');

        function validate() {
            const val = document.getElementById('nickInp').value;
            const btn = document.getElementById('joinBtn');
            const count = document.getElementById('charCount');
            count.innerText = "Kalan: " + Math.max(0, 16 - val.length);
            if(val.length >= 16) {
                btn.disabled = false;
                count.style.color = "#23a559";
            } else {
                btn.disabled = true;
                count.style.color = "#f23f42";
            }
        }

        function enterApp() {
            myNick = document.getElementById('nickInp').value;
            isAdm = myNick.toLowerCase().includes("admin");
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            document.getElementById('selfName').innerText = "â€¢ " + myNick;
            if(isAdm) document.getElementById('adminClear').style.display = 'block';
        }

        function send() {
            const inp = document.getElementById('chatInp');
            if(inp.value.trim() !== "") {
                chatRef.push({
                    user: myNick,
                    text: inp.value,
                    admin: isAdm,
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                });
                inp.value = "";
            }
        }

        chatRef.on('child_added', (snap) => {
            const data = snap.val();
            const flow = document.getElementById('msgFlow');
            const isAdminMsg = data.admin ? 'admin' : '';
            const avatarChar = data.user.charAt(0).toUpperCase();

            flow.innerHTML += `
                <div class="message">
                    <div class="avatar" style="background: ${data.admin ? '#f1c40f' : '#5865f2'}">${avatarChar}</div>
                    <div class="msg-content">
                        <span class="msg-user ${isAdminMsg}">${data.user}</span>
                        <span class="msg-time">${data.time}</span>
                        <div class="msg-text">${data.text}</div>
                    </div>
                </div>
            `;
            flow.scrollTop = flow.scrollHeight;
        });

        // CHATÄ° TEMÄ°ZLE (SADECE ADMIN)
        function clearChat() {
            if(confirm("TÃ¼m mesajlarÄ± silmek istiyor musun?")) {
                chatRef.remove();
            }
        }

        // VeritabanÄ± silindiÄŸinde ekranÄ± temizle
        chatRef.on('value', (snap) => {
            if(!snap.exists()) {
                document.getElementById('msgFlow').innerHTML = "";
            }
        });

        document.getElementById('chatInp').addEventListener('keypress', (e) => { if(e.key === 'Enter') send(); });
    </script>
</body>
</html>
